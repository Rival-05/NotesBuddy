#!/bin/bash

# Create logs directory if it doesn't exist

mkdir -p .husky/logs

# Run build with logging - show output in terminal AND save to file

echo "üî® Running build..."
bun run build 2>&1 | tee .husky/logs/build.log

# Check if build succeeded (using PIPESTATUS for bash)

if [ ${PIPESTATUS[0]} -ne 0 ]; then
echo "‚ùå Build failed! Check .husky/logs/build.log for details."
echo "Commit blocked."
exit 1
fi

echo "‚úÖ Build successful! Proceeding with commit..."
